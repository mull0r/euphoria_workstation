---
- hosts: localhost
  connection: local
  become: true
  
  tasks:
  - name: Maak dconf local.d directory
    file:
      path: /etc/dconf/db/local.d
      state: directory
      owner: root
      group: root
      mode: '0755'
  
  - name: Maak dconf site.d directory
    file:
      path: /etc/dconf/db/site.d
      state: directory
      owner: root
      group: root
      mode: '0755'
      
  - name: Maak dconf site.d/locks directory
    file:
      path: /etc/dconf/db/site.d/locks
      state: directory
      owner: root
      group: root
      mode: '0755'
      
  - name: TEST Maak profile directory
    file:
      path: /etc/dconf/profile
      state: directory
      owner: root
      group: root
      mode: '0755'
  
  - name: TEST Maak db file
    copy:
      dest: "/etc/dconf/profile/user"
      content: |
        user-db:user
        system-db:local
        system-db:site

  - name: Maak 00-background file met inhoud
    copy:
      dest: "/etc/dconf/db/site.d/00-background"
      content: |
        [org/gnome/desktop/background]
        color-shading-type='solid'
        picture-options='zoom'
        picture-uri='file:///usr/share/backgrounds/euphoria-wallpaper.png'

  - name: Maak background lock-file met inhoud
    copy:
      dest: "/etc/dconf/db/site.d/locks/background"
      content: |
        org/gnome/desktop/background/picture-uri
          
#als laatste
  - name: TEST run command dconf update
    command: dconf update
    
